/*
 *  sneakers.js - v1.0.0
 *  jQuery plugin that simulates a tty typing and decryption effect.
 *  https://github.com/mar10/sneakers.js
 *
 *  Made by Martin Wendt
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(a){return/\s/.test(a)?a:h[Math.floor(i*Math.random())]}function f(a){for(var b="",c=0,d=a.length;c<d;c++)b+=e(a[c]);return b}function g(b,c){this.element=b,this.$element=a(b),this.settings=a.extend({},k,c),this._defaults=k,this._name=j,this.originalText=null,this.currentText=null,this.decodeStart=null,this.init()}var h="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",i=h.length,j="sneakers",k={typeSpeedMs:4,jumbleDurationMs:2e3,jumbleSpeedMs:35,decodeDurationMs:5e3,decodeSpeedMs:100,stopEps:.01,lockSize:!1,start:a.noop,type:a.noop,done:a.noop};a.extend(g.prototype,{init:function(){var a=this;this.encode(),this.settings.start.call(this.element),this.type(this.currentText,0).done(function(){a.settings.type.call(a.element),console.time("decode"),a.decodeStart=Date.now(),a.decrypt().done(function(){console.timeEnd("decode"),a.settings.done.call(a.element)})})},encode:function(){var a=this.$element,b=this.settings;this.originalText=a.text(),b.jumbleDurationMs||b.decodeDurationMs?this.currentText=f(this.originalText):this.currentText=this.originalText,this.settings.lockSize&&a.css({height:a.css("height"),width:a.css("width")}),a.text(b.typeSpeedMs?"":this.currentText),a.show()},type:function(b,c,d,e){var f,g,h=this.settings,i=Date.now(),j=d||new a.Deferred,k=this;return h.typeSpeedMs&&c<b.length?(g=1,e&&(f=i-e,g=Math.floor(f/h.typeSpeedMs)),this.$element.append(b.substr(c,g)),setTimeout(function(){k.type.call(k,b,c+g,j,i)},h.typeSpeedMs)):(this.$element.text(b),j.resolve()),d?null:j.promise()},decrypt:function(b){var c,d,f=this.settings,g=Date.now(),h=g-this.decodeStart,i=h<f.jumbleDurationMs,j=f.decodeDurationMs?(h-f.jumbleDurationMs)/f.decodeDurationMs:0,k=b||new a.Deferred,l=this,m=0,n=this.originalText,o=this.currentText,p=o.length,q="";if(i&&f.jumbleDurationMs>0||!i&&f.decodeDurationMs>0){for(d=0;d<p;d++)c=o[d],i?(m++,c=e(c)):c!==n[d]&&(Math.random()>j?(m++,c=e(c)):c=n[d]),q+=c;m/p<f.stopEps?(this.currentText=n,m=0):this.currentText=q}else this.currentText=n;return this.$element.text(this.currentText),m>0?setTimeout(function(){l.decrypt.call(l,k)},i?f.jumbleSpeedMs:f.decodeSpeedMs):k.resolve(),b?null:k.promise()}}),a.fn[j]=function(b){return this.each(function(){a.data(this,"plugin_"+j)||a.data(this,"plugin_"+j,new g(this,b))})}}(jQuery,window,document);